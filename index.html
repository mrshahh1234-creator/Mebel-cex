<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TABRIZ group | Professional Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --accent: #f39c12; --dark: #2c3e50; }
        body { background: #f0f2f5; font-family: 'Inter', sans-serif; color: #333; }
        
        /* –®–∞–ø–∫–∞ */
        .navbar { background: linear-gradient(135deg, #1a1a1a, #2c3e50); border-bottom: 3px solid var(--accent); }
        .navbar-brand { font-weight: 800; letter-spacing: 1px; color: var(--accent) !important; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .main-card { background: white; border: none; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); padding: 30px; margin-top: 30px; }
        .step-header { border-left: 5px solid var(--accent); padding-left: 15px; margin-bottom: 25px; }

        /* –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö */
        .form-control { border-radius: 10px; padding: 12px; border: 1px solid #ddd; }
        .form-control:focus { border-color: var(--accent); box-shadow: 0 0 0 0.25 margin-top: rgba(243, 156, 18, 0.25); }

        /* –¢–∞–±–ª–∏—Ü–∞ */
        .table-responsive { border-radius: 15px; overflow: hidden; background: #fff; }
        .table thead { background: var(--dark); color: white; }
        .table-input input { border: none; background: transparent; width: 100%; outline: none; }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-main { background: var(--accent); color: white; border-radius: 12px; font-weight: 700; padding: 12px 25px; transition: 0.3s; border: none; }
        .btn-main:hover { background: #e67e22; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(230, 126, 34, 0.4); }

        .hidden { display: none; }
        .academy-footer { position: fixed; bottom: 15px; right: 25px; font-size: 13px; color: #95a5a6; font-weight: 600; text-transform: uppercase; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark">
    <div class="container">
        <a class="navbar-brand" href="#">TABRIZ GROUP</a>
        <span class="text-white small">Mebelchilar uchun maxsus platforma</span>
    </div>
</nav>

<div class="container pb-5">
    
    <div id="authSection" class="main-card mx-auto" style="max-width: 450px;">
        <div class="step-header">
            <h4 class="fw-bold m-0">Kirish</h4>
        </div>
        <div class="mb-3">
            <label class="form-label small fw-bold">Ismingiz</label>
            <input type="text" id="userName" class="form-control" placeholder="Masalan: Akmal">
        </div>
        <div class="mb-3">
            <label class="form-label small fw-bold">Telefon raqamingiz</label>
            <input type="tel" id="userPhone" class="form-control" placeholder="+998 90 123 45 67">
        </div>
        <button onclick="sendAuthToTelegram()" class="btn btn-main w-100">
            <i class="bi bi-send-fill me-2"></i>Kodni olish
        </button>
        
        <div id="codeBlock" class="mt-4 hidden animate__animated animate__fadeIn">
            <label class="form-label small fw-bold text-success">Telegramga yuborilgan kodni kiriting</label>
            <input type="text" id="authCode" class="form-control mb-3 text-center fw-bold" style="letter-spacing: 5px;" placeholder="0000">
            <button onclick="verifyAndLogin()" class="btn btn-dark w-100 py-2">Tasdiqlash</button>
        </div>
    </div>

    <div id="orderSection" class="main-card hidden animate__animated animate__fadeIn">
        <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-3">
            <h3 class="fw-bold m-0 text-dark">Yangi buyurtma</h3>
            <span class="badge bg-success p-2" id="userDisplay"></span>
        </div>
        
        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <div class="p-3 bg-light rounded-3">
                    <label class="form-label small fw-bold text-muted text-uppercase">Material nomi</label>
                    <input type="text" id="material" class="form-control" placeholder="Egger, Kronospan...">
                </div>
            </div>
            <div class="col-md-6">
                <div class="p-3 bg-light rounded-3">
                    <label class="form-label small fw-bold text-muted text-uppercase">Kromka nomi/o'lchami</label>
                    <input type="text" id="edge" class="form-control" placeholder="2.0mm Oq...">
                </div>
            </div>
        </div>

        <div class="table-responsive shadow-sm border">
            <table class="table table-hover align-middle m-0" id="orderTable">
                <thead>
                    <tr class="small text-uppercase">
                        <th width="25%">Nomi</th>
                        <th width="15%">Bo'yi (mm)</th>
                        <th width="15%">Eni (mm)</th>
                        <th width="10%">Soni</th>
                        <th width="20%">Kromka</th>
                        <th width="15%">Burash</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="table-input">
                        <td><input type="text" placeholder="Masalan: Eshik"></td>
                        <td><input type="number" placeholder="720"></td>
                        <td><input type="number" placeholder="450"></td>
                        <td><input type="number" placeholder="1"></td>
                        <td><input type="text" placeholder="B2+E1"></td>
                        <td>
                            <select class="form-select form-select-sm">
                                <option value="Ha">Ha</option>
                                <option value="Yo'q">Yo'q</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="mt-4 d-flex justify-content-between">
            <button class="btn btn-outline-dark" onclick="addRow()">
                <i class="bi bi-plus-circle me-2"></i>Qator qo'shish
            </button>
            <button class="btn btn-main px-5" onclick="sendOrderToTelegram()">
                <i class="bi bi-check-all me-2"></i>BUYURTMANI YUBORISH
            </button>
        </div>
    </div>
</div>

<div class="academy-footer">
    by MUSTAFAYEV ACADEMY
</div>

<script>
    // --- –¢–ï–õ–ï–ì–†–ê–ú –°–û–ó–õ–ê–ú–ê–õ–ê–†–ò (–ë–£ –ï–†–ù–ò –¢–é–õ–î–ò–†–ò–ù–ì) ---
    const TG_TOKEN = "–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê"; // BotFather'dan olingan token
    const CHAT_ID = "–í–ê–®_ID"; // Sizning yoki guruhning ID'si

    function addRow() {
        let table = document.getElementById("orderTable").getElementsByTagName('tbody')[0];
        let row = table.insertRow();
        row.className = "table-input";
        row.innerHTML = `<td><input type="text"></td><td><input type="number"></td><td><input type="number"></td><td><input type="number"></td><td><input type="text"></td><td><select class="form-select form-select-sm"><option value="Ha">Ha</option><option value="Yo'q">Yo'q</option></select></td>`;
    }

    async function sendAuthToTelegram() {
        const name = document.getElementById('userName').value;
        const phone = document.getElementById('userPhone').value;
        if(!name || !phone) return alert("Ma'lumotlarni to'ldiring!");

        const code = Math.floor(1000 + Math.random() * 9000); 
        localStorage.setItem('auth_code', code); 

        const text = `üîë KIRISH KODI\nFoydalanuvchi: ${name}\nTel: ${phone}\nKod: ${code}`;
        
        await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);
        
        document.getElementById('codeBlock').classList.remove('hidden');
        alert("Kod Telegram botga yuborildi!");
    }

    function verifyAndLogin() {
        const inputCode = document.getElementById('authCode').value;
        const savedCode = localStorage.getItem('auth_code');

        if(inputCode === savedCode) {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('orderSection').classList.remove('hidden');
            document.getElementById('userDisplay').innerText = document.getElementById('userName').value;
        } else {
            alert("Kod noto'g'ri!");
        }
    }

    async function sendOrderToTelegram() {
        const material = document.getElementById('material').value;
        const edge = document.getElementById('edge').value;
        const user = document.getElementById('userName').value;
        
        let orderDetails = `üì¶ YANGI BUYURTMA\nüë§ Mijoz: ${user}\nü™µ Material: ${material}\nüé® Kromka: ${edge}\n\nüìê DETALLAR:\n`;
        
        let rows = document.querySelectorAll("#orderTable tbody tr");
        rows.forEach((row, index) => {
            let inputs = row.querySelectorAll("input, select");
            orderDetails += `${index+1}. ${inputs[0].value} | ${inputs[1].value}x${inputs[2].value} | ${inputs[3].value} dona | Kromka: ${inputs[4].value} | Burash: ${inputs[5].value}\n`;
        });

        await fetch(`https://api.telegram.org/bot${7927717291:AAG4h_LbZoY-1s2y0_zzNoCFudrU7pPDNas}/sendMessage?chat_id=${1015769230}&text=${encodeURIComponent(orderDetails)}`);
        
        alert("Buyurtma muvaffaqiyatli yuborildi!");
    }
</script>

</body>
</html>
