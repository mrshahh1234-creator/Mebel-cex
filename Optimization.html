
<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <title>TABRIZ group | Optimizatsiya</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
    <h3>Raskroy xaritasi</h3>
    <canvas id="c" width="2800" height="2070" style="width:100%; border:2px solid #000;"></canvas>
    
    

    <button class="btn btn-primary mt-4" onclick="window.location.href='report.html'">Hisobotni ko'rish</button>
    <script>
        const ctx = document.getElementById('c').getContext('2d');
        let data = JSON.parse(localStorage.getItem('order_data'));
        let x=20, y=20, rowH=0;
        ctx.fillStyle="#fff"; ctx.fillRect(0,0,2800,2070);
        data.forEach(d => {
            for(let i=0; i<d.c; i++) {
                if(x + parseInt(d.w) > 2780) { x=20; y+=rowH+20; rowH=0; }
                ctx.strokeStyle="#000"; ctx.strokeRect(x, y, d.w, d.h);
                if(parseInt(d.h) > rowH) rowH = parseInt(d.h);
                x += parseInt(d.w) + 10;
            }
        });
    </script>
</body>
</html>
