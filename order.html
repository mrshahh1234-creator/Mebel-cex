<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Tabriz | Order</title>
</head>
<body>
    <div class="wrapper">
        <div class="screen active" style="max-width:600px;">
            <h1 id="m-name">–é–õ–ß–ê–ú–õ–ê–†</h1>
            <table id="p-table">
                <thead><tr><th>L</th><th>W</th><th>–°–æ–Ω–∏</th><th>–ö—Ä–æ–º–∫–∞</th></tr></thead>
                <tbody id="p-body"></tbody>
            </table>
            <button class="btn btn-secondary" onclick="addRow()">+ “ö—û—à–∏—à</button>
            <button class="btn" onclick="saveAndGo()">üìê –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è</button>
        </div>
    </div>
    <script>
        document.getElementById('m-name').innerText = localStorage.getItem('sel_mat_name');
        function addRow() {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><input type="number" class="l" value="600"></td><td><input type="number" class="w" value="400"></td><td><input type="number" class="q" value="1"></td><td><input type="checkbox" class="e1"><input type="checkbox" class="e2"></td>`;
            document.getElementById('p-body').appendChild(tr);
        }
        function saveAndGo() {
            let data = [];
            document.querySelectorAll('#p-body tr').forEach(r => {
                data.push({l:r.querySelector('.l').value, w:r.querySelector('.w').value, q:r.querySelector('.q').value, e1:r.querySelector('.e1').checked, e2:r.querySelector('.e2').checked});
            });
            localStorage.setItem('current_order', JSON.stringify(data));
            window.location.href = 'optimization.html';
        }
        addRow();
    </script>
</body>
</html>
